# Access Rights

## Overview

Access rights in the Data API framework control how fields can be read and written through the API.
The `@Access` decorator allows you to specify whether a field is read-only, write-only,
or read-write, providing fine-grained control over data access patterns.

## Access Modes

The framework provides three access modes through the `AccessMode` enum:

```typescript
import { AccessMode } from '@ajs/data-api/beta/metadata';

enum AccessMode {
  ReadOnly = 1,    // Field can only be read
  WriteOnly = 2,   // Field can only be written
  ReadWrite = 3    // Field can be both read and written
}
```

## Basic Usage

### Read-Only Fields

Fields marked as read-only can only be retrieved through GET and LIST operations, 
but cannot be modified through POST or PUT operations.

```typescript
@RegisterDataController()
class UserAPI extends DataController(User, DefaultRoutes.All, Controller('/users')) {
  @ModelReference()
  @StaticModel(UserModel, database_name)
  declare userModel: UserModel;

  @Access(AccessMode.ReadOnly)
  declare _id: string;  // Auto-generated ID, cannot be modified

  @Access(AccessMode.ReadOnly)
  declare email: string;  // Email is read-only
  
  declare name: string;  // Name can be read and written
}
```

**Example:**
```http
GET /users/get?id=user-123
```

**Response:**
```json
{
  "_id": "user-123",
  "email": "bob@example.com",
  "name": "Bob"
}
```

**Attempting to modify read-only field:**
```http
PUT /users/edit?id=user-123
Content-Type: application/json

{
  "email": "alice@example.com"  // This will be ignored
  "name": "Alice"               // This will be updated in the database
}
```

### Write-Only Fields

Fields marked as write-only can only be set through POST or PUT operations,
but are never returned in GET or LIST operations, regardless of other decorators.

```typescript
@RegisterDataController()
class UserAPI extends DataController(User, DefaultRoutes.All, Controller('/users')) {
  // Model Reference
  
  @Access(AccessMode.WriteOnly)
  declare password: string;  // Can be set but never returned

  @Access(AccessMode.ReadWrite)
  declare name: string;

  @Access(AccessMode.ReadWrite)
  declare email: string;
}
```

**Example:**
```http
POST /users/new
Content-Type: application/json

{
  "name": "Bob",
  "email": "bob@example.com",
  "password": "qwerty123"
}
```

**Response:**
```json
["user-123"]
```

**Getting the user (password is not returned):**
```http
GET /users/get?id=user-123
```

**Response:**
```json
{
  "_id": "user-123",
  "name": "Bob",
  "email": "bob@example.com"
}
```

### Read-Write Fields

Fields marked as read-write can be both retrieved and modified through all operations.

```typescript
@RegisterDataController()
class UserAPI extends DataController(User, DefaultRoutes.All, Controller('/users')) {
  // Model Reference
  
  @Access(AccessMode.ReadWrite)
  declare name: string;

  @Access(AccessMode.ReadWrite)
  declare email: string;

  @Access(AccessMode.ReadWrite)
  declare age: number;
}
```

**Response:**
```http
200 OK
```

## Continuing with Validators
See the [validators documentation](./5.validators.md) to learn how to enforce additional rules on field values.
